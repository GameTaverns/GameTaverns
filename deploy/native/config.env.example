# ╔═══════════════════════════════════════════════════════════════════╗
# ║           GameTaverns - Native Server Configuration               ║
# ╚═══════════════════════════════════════════════════════════════════╝
#
# Copy this file to /opt/gametaverns/.env and edit with your values.
# All paths assume installation to /opt/gametaverns
#
# Generate secrets with: openssl rand -base64 32

# ═══════════════════════════════════════════════════════════════════
# DATABASE (PostgreSQL 16)
# ═══════════════════════════════════════════════════════════════════

# Full connection string (recommended)
DATABASE_URL=postgresql://gametaverns:CHANGE_THIS_PASSWORD@localhost:5432/gametaverns

# Or individual settings (if DATABASE_URL not set)
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=gametaverns
# DB_PASSWORD=CHANGE_THIS_PASSWORD
# DB_NAME=gametaverns

# ═══════════════════════════════════════════════════════════════════
# AUTHENTICATION & SECURITY
# ═══════════════════════════════════════════════════════════════════

# JWT secret for authentication tokens (REQUIRED - minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_SECRET_AT_LEAST_32_CHARS

# Token expiry (default: 7 days)
JWT_EXPIRES_IN=7d

# Encryption key for PII data (messages, emails)
# Generate with: openssl rand -hex 32
PII_ENCRYPTION_KEY=

# Cloudflare Turnstile for bot protection (optional but recommended)
TURNSTILE_SECRET_KEY=
TURNSTILE_SITE_KEY=

# ═══════════════════════════════════════════════════════════════════
# SERVER
# ═══════════════════════════════════════════════════════════════════

# API server port (proxied behind Nginx)
PORT=3001

# Environment
NODE_ENV=production

# Enable standalone/multi-tenant mode
STANDALONE=true

# ═══════════════════════════════════════════════════════════════════
# SITE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════

# Your domain (with https)
SITE_URL=https://gametaverns.com

# Site branding
SITE_NAME=GameTaverns
SITE_DESCRIPTION=Share your board game collection

# Allowed origins for CORS (comma-separated, wildcards supported)
CORS_ORIGINS=https://gametaverns.com,https://*.gametaverns.com

# ═══════════════════════════════════════════════════════════════════
# EMAIL (Postfix/SMTP)
# ═══════════════════════════════════════════════════════════════════

# For self-hosted Postfix, use localhost
SMTP_HOST=localhost
SMTP_PORT=25
SMTP_SECURE=false

# Leave empty for local Postfix (no auth needed)
SMTP_USER=
SMTP_PASS=

# From address for transactional emails
SMTP_FROM=GameTaverns <noreply@gametaverns.com>

# ═══════════════════════════════════════════════════════════════════
# AI INTEGRATION (Platform-level keys)
# ═══════════════════════════════════════════════════════════════════

# Perplexity AI - for game metadata enrichment and search
# Get key at: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=

# Firecrawl - for web scraping (BGG imports)
# Get key at: https://firecrawl.dev/
FIRECRAWL_API_KEY=

# Alternative AI providers (if Perplexity not available)
# OPENAI_API_KEY=
# ANTHROPIC_API_KEY=
# GOOGLE_AI_API_KEY=

# ═══════════════════════════════════════════════════════════════════
# DISCORD INTEGRATION (Optional)
# ═══════════════════════════════════════════════════════════════════

# Discord bot for notifications
# Create at: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# ═══════════════════════════════════════════════════════════════════
# FEATURES
# ═══════════════════════════════════════════════════════════════════

# Toggle platform features (all enabled by default)
FEATURE_PLAY_LOGS=true
FEATURE_WISHLIST=true
FEATURE_FOR_SALE=true
FEATURE_MESSAGING=true
FEATURE_RATINGS=true
FEATURE_EVENTS=true
FEATURE_POLLS=true

# ═══════════════════════════════════════════════════════════════════
# RATE LIMITING
# ═══════════════════════════════════════════════════════════════════

# Rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ═══════════════════════════════════════════════════════════════════
# FILE STORAGE
# ═══════════════════════════════════════════════════════════════════

# Directory for user uploads (library logos, etc.)
UPLOAD_DIR=/opt/gametaverns/uploads

# Max upload size in MB
MAX_UPLOAD_SIZE_MB=10

# ═══════════════════════════════════════════════════════════════════
# PLATFORM ADMINISTRATION
# ═══════════════════════════════════════════════════════════════════

# Platform admin emails (comma-separated)
# These users get admin role on registration
PLATFORM_ADMINS=admin@gametaverns.com

# Reserved slugs (in addition to defaults like www, api, mail, admin)
RESERVED_SLUGS=

# ═══════════════════════════════════════════════════════════════════
# LOGGING
# ═══════════════════════════════════════════════════════════════════

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log directory
LOG_DIR=/opt/gametaverns/logs

# ═══════════════════════════════════════════════════════════════════
# EXTERNAL SERVICES
# ═══════════════════════════════════════════════════════════════════

# BoardGameGeek API (no key needed)
BGG_API_URL=https://boardgamegeek.com/xmlapi2
