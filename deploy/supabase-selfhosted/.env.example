############################################################
# GameTaverns Self-Hosted Configuration
# Version: 2.7.1 - Connection Fix Edition
# Domain: gametaverns.com (hardcoded)
############################################################

# ===========================================
# Domain Configuration (HARDCODED)
# ===========================================
DOMAIN=gametaverns.com
SITE_URL=https://gametaverns.com

# CRITICAL: API_EXTERNAL_URL should match SITE_URL for same-origin routing
# The frontend accesses /auth/, /rest/, /functions/ on the SAME domain
# Host Nginx proxies these paths to Kong on port 8000
# Do NOT use a separate api subdomain - it causes CORS issues
API_EXTERNAL_URL=https://gametaverns.com

STUDIO_URL=https://studio.gametaverns.com
MAIL_DOMAIN=gametaverns.com

# Wildcard subdomain for tenant libraries
# Libraries are accessible at: {slug}.gametaverns.com
LIBRARY_SUBDOMAIN_PATTERN=*.gametaverns.com

# ===========================================
# REQUIRED: Security Keys (auto-generated by install.sh)
# ===========================================
POSTGRES_PASSWORD=
JWT_SECRET=
ANON_KEY=
SERVICE_ROLE_KEY=
SECRET_KEY_BASE=
PII_ENCRYPTION_KEY=
# Unique encryption key for Supabase Realtime channel data at rest.
# Generate with: openssl rand -hex 32
# CRITICAL: Change from the default 'supabaserealtime' before going to production!
REALTIME_ENC_KEY=

# ===========================================
# Site Branding
# ===========================================
SITE_NAME=GameTaverns
SITE_DESCRIPTION=Browse and discover our collection of board games

# ===========================================
# Port Configuration
# ===========================================
APP_PORT=3000
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443
STUDIO_PORT=3001
POSTGRES_PORT=5432
ROUNDCUBE_PORT=9001

# ===========================================
# Auth Configuration
# ===========================================
DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
JWT_EXPIRY=3600
ADDITIONAL_REDIRECT_URLS=
# Email rate limit per IP per hour (default: 10). Raise only if users report issues.
GOTRUE_RATE_LIMIT_EMAIL_SENT=10

# ===========================================
# SMTP Configuration
# ===========================================
# Edge Functions (send-email for reply-to-seller) use SMTP_* variables
# Leave SMTP_HOST as 'mail' to use local Mailcow relay on port 25
SMTP_HOST=mail
SMTP_PORT=25
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@gametaverns.com

# GoTrue (auth emails: password reset, email confirmation) uses GOTRUE_SMTP_*
# Typically uses port 465 (implicit TLS) for Mailcow's secure submission
GOTRUE_SMTP_HOST=mail
GOTRUE_SMTP_PORT=465
SMTP_ADMIN_EMAIL=admin@gametaverns.com
SMTP_SENDER_NAME=GameTaverns
SMTP_FROM=noreply@gametaverns.com

# ===========================================
# Discord Integration
# ===========================================
# Required for Discord OAuth and notifications
# Create app at: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# ===========================================
# AI Services
# ===========================================
# Perplexity: For text-based AI (recommendations, enrichment, etc.)
# Get key at: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=

# Google AI (Gemini): For vision-based image classification during imports
# Get key at: https://aistudio.google.com/apikey
GOOGLE_AI_API_KEY=

# Firecrawl: For URL-based game imports
# Get key at: https://www.firecrawl.dev/
FIRECRAWL_API_KEY=

# Jina AI: For proxying BGG requests (bypasses IP blocks)
# Get key at: https://jina.ai/ (optional, improves reliability)
JINA_API_KEY=

# ===========================================
# BoardGameGeek Integration (REQUIRED for imports)
# ===========================================
# BGG now requires API authentication for XML API access.
# Register at: https://boardgamegeek.com/wiki/page/BGG_XML_API2
# Without this token, game imports will fail with 401 errors.
BGG_API_TOKEN=

# ===========================================
# Bot Protection (Cloudflare Turnstile)
# ===========================================
# Required for signup/login protection
# Get keys at: https://dash.cloudflare.com/?to=/:account/turnstile
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# ===========================================
# Timezone
# ===========================================
TIMEZONE=America/New_York
